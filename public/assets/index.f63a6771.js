import{j as m,f as d,u as g,r as p,a as f,R as b}from"./vendor.a6f1d0d6.js";const v=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function l(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerpolicy&&(r.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?r.credentials="include":e.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(e){if(e.ep)return;e.ep=!0;const r=l(e);fetch(e.href,r)}};v();const t=m.exports.jsx,o=m.exports.jsxs,y=m.exports.Fragment;d.initializeApp({apiKey:"AIzaSyBsXa5K_avDSs6HrvdCSHgMTdT7JmKytwQ",authDomain:"pulgueta-chat.firebaseapp.com",projectId:"pulgueta-chat",storageBucket:"pulgueta-chat.appspot.com",messagingSenderId:"703821653237",appId:"1:703821653237:web:5604793872821c2add11bc",measurementId:"G-ZDP2RMQESC"});const c=d.auth(),x=d.firestore(),I=()=>o("div",{className:"init",children:[t("h1",{children:"Chat an\xF3nimo, hable con libertad."}),o("button",{className:"ingresa-btn",onClick:()=>{const s=new d.auth.GoogleAuthProvider;c.signInWithPopup(s)},children:["Ingresa con ",t("span",{className:"google",children:"Google"})]})]}),C=()=>c.currentUser&&t("button",{className:"salir-btn",onClick:()=>{c.signOut()},children:"Despegarla"}),S=()=>{const n=p.exports.useRef(),s=x.collection("message"),l=s.orderBy("createdAt").limit(25),[a]=f(l,{idField:"id"}),[e,r]=p.exports.useState(""),u=async i=>{i.preventDefault();const{uid:h}=c.currentUser;await s.add({text:e,createdAt:d.firestore.FieldValue.serverTimestamp(),uid:h}),r(""),n.current.scrollIntoView({behavior:"smooth"})};return o(y,{children:[o("main",{children:[a&&a.map(i=>t(A,{message:i},i.id)),t("div",{ref:n})]}),o("form",{onSubmit:u,children:[t("input",{value:e,onChange:i=>{r(i.target.value)},placeholder:"Hable pues!"}),t("button",{className:"enviar-btn",type:"submit",children:"Enviar"})]})]})},A=n=>{const{text:s,uid:l,photoUrl:a}=n.message,e=l===c.currentUser.uid?"sent":"received";return t("div",{className:`message ${e}`,children:t("p",{children:s})})},N=()=>{const[n]=g(c);return o("div",{className:"App",children:[o("header",{children:[t("h1",{children:"Chat Barrancabermeja"}),t(C,{})]}),t("section",{children:n?t(S,{}):t(I,{})})]})};b.render(t(N,{}),document.getElementById("root"));
